$(document).ready(function(){function e(e){return!e||0===e.length}$(".file-input").change(function(){var e=$(this).prop("files")[0].name.split(".")[0];$(this).parent().find(".file-label").html(e)}),$(".sendForm .bottom_contact_form").submit(function(n){var t,a;n.preventDefault(),console.log("Submit event triggered");let r=$(this),i=r.data("page_id"),o=r.find("#name").val(),s=r.find("#message").val(),l=r.find("#email").val(),d=r.data("error_empty"),p=r.data("error_invalid"),c=r.find(".pagetitle").val(),f=$("#plan_select").val();console.log(f),a=void 0!==(t=r.find("#file_field").prop("files")[0])?Math.round(t.size/1048576):void 0,console.log(c);let m=r.find(".pageurl").val();console.log(m);let g=r.find(".input_services"),u={};g.each(function(){u[$(this).attr("id")]=$(this).prop("checked")}),r.find("#name").removeClass("err"),r.find("#message").removeClass("err"),r.find("#email").removeClass("err"),r.find(".chb-container").removeClass("err");let v=!1;e(o)&&(v=!0,r.find("#name").siblings(".error").fadeIn(500).text(d)),e(l)&&(v=!0,r.find("#email").siblings(".error").fadeIn(500).text(d)),l.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)||(v=!0,r.find("#email").siblings(".error").fadeIn(500).text(p));let h=Object.values(u);if(g.length>0&&(h.every(e=>!e)?(v=!0,r.find(".contact_services").prev().addClass("err"),console.log("an-else")):console.log("allright")),console.log(v),!v){console.log("no errors");let b=new FormData;b.append("action","contactform"),b.append("page_id",i),b.append("name",o),b.append("message",s),b.append("email",l),b.append("title",c),b.append("url",m),b.append("file",t),b.append("plan",f),g.each(function(){let e=$(this).attr("id");b.append(e,u[e])}),$.ajax({url:"/wp-admin/admin-ajax.php",data:b,type:"POST",processData:!1,contentType:!1,dataType:"json",beforeSend:function(e){console.log("beforeSend")},success:function(e){"SUCCESS"===e.response?(window.location="/thank-you-page/",r.find(".chb-container").prop("checked",!1),console.log("Success"),console.log("response=="+JSON.stringify(e)),console.log("formData=="+JSON.stringify([...b]))):(console.log(e.error),console.log("no SUCCESS"))},error:function(e,n,t){var a=e.status+": "+t;console.log(a),console.log("error")}})}}),$(".sendForm .bottom_contact_form input, .sendForm .bottom_contact_form textarea").focus(function(){$(this).removeClass("err"),$(this).siblings(".error").fadeOut(500)}),$(".sendForm .bottom_contact_form .input_services").change(function(){$(this).closest(".contact_services").prev().removeClass("err")})});